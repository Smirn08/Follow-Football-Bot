# -Follow-Football-Bot-

Привет! 

Это телеграм бот - мой "выпускной" проект с курсов [Learn Python 12](https://learn.python.ru/)

Вы можете заценть его в Telegram: [⚽️ Follow Football](https://t.me/follow_football_bot)

---
## Что умеет?

- Присылает уведомление о начале матча по подписке;
- Присылает ссылки на трансляции для просмотра матчей через [Sopcast](http://www.sopcast.com/) и [Ace Stream](http://www.acestream.org/rus/);
- Показывает таблицу EPL 2018\19;
- Дает возможность посмотреть 5 последних и 5 будущих матчей выбранного клуба.
---
## Принцип работы:

 - При первом подключении ***bot*** предлагает выбрать ***club_name*** из EPL 2018/19, запоминает выбор и складывает в базу данных. Так формируется БД пользователей бота.

Весь интерфейс и основное меню основаны на ***inline*** кнопках Telegram и интуитивно понятны.
![](https://pp.userapi.com/c855424/v855424258/2f7dc/wVfEZr4sKzk.jpg)

- При нажатии *"Сыгранные матчи"* или "Будущие матчи" ***bot*** сравнивает сегодняшнюю дату и дату последнего обновления БД, и если дата в БД устарела, то ***bot*** парсит информацию о матчах со [sportbox.ru](https://news.sportbox.ru/) и складывает ее в БД. Это было реализовано для того, чтобы во первых ускорить работу при повторном запросе, а так же лишний раз не парсить сайт.
  
- При нажатии *"Мой клуб"* есть возможность посмотреть текущий выбор и сменить его при желании.
  
- Кнопка *"Об авторе"* дает возможность написать мне (автору) в [Telegram](https://t.me/Smirn08) и содержит ссылку на мой профиль на [GitHub](https://github.com/Smirn08).

- Кнопка *"Турнирная таблица"* как не странно :) дает ссылку на турнирную таблицу Английской Примьер-лиги 2018/2019.

- Ну и наконец при нажатии *"Трансляции"* ***bot*** смотрит есть ли в базе данных матчи сегодня, если нет то уведомляет об этом и говорит когда ближайшая. Если есть, то за 2 минуты до игры в этом разделе будут доступны ссылки на трансляции для просмотра матчей через [Sopcast](http://www.sopcast.com/) и [Ace Stream](http://www.acestream.org/rus/), спарсеные с [livesport.ws](livesport.ws). Так же в этом разделе есть возможность настроить уведомления о ближайшем по времени матче.
---

## Что использовал?

- python 3.6.8
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [requests](https://pypi.org/project/requests/) - запросы html
- [Beautiful Soup](https://pypi.org/project/beautifulsoup4/) - работа с html
- SQLite ([sqlite3](https://docs.python.org/2/library/sqlite3.html)) - базы данных
- ...
---
## Подробнее о файлах:

- `ff_bot.py` - main файл бота;
- `settings.py` - файл с основными настройками бота (кнопки, текст и т.п.);
- `bot_user.py` - файл с функциями работы с пользователем (поиск по базе, проверка клуба и т.п.)
- `ten_matches.py` - файл с функциями, действия которых направлены на функционал с прошедшими и будущими матчами (парсинг, запись в бд, выдача боту из бд и т.п.)
- `stream_links.py` - файл с функциями, действия которых направлены на функционал с ссылками на трансляции (парсинг, выдача боту и т.п.)
- `take_club_from_db.py` - файл с функцией которая получает полные данные о футбольном клубе с базы данных
- `users.db` - база данных с пользователями бота
- `clubs_schedule.db` - база данных, где содержится информация про клубы (ссылки, которые необходимо парсить и т.п.), а так же информация о прошедших и будущих матчах.
- `club_epl_18-19.db` - основная база данных с полной информацией о клубах EPL 2018/19
- ...

- в папке `additional_files` находятся файлы, которые не влияют на работу бота, но так или иначе как то использовались в процесе его написания

---

***Maksim Smirnov*** - <smirn08m@gmail.com>